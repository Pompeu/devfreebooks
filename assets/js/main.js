var Handlebars=function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return h[a]||"&amp;"}function c(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}function d(a){return a instanceof g?a.toString():a||0===a?(a=""+a,j.test(a)?a.replace(i,b):a):""}function e(a){return a||0===a?m(a)&&0===a.length?!0:!1:!0}var f={},g=a,h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},i=/[&<>"'`]/g,j=/[&<>"'`]/;f.extend=c;var k=Object.prototype.toString;f.toString=k;var l=function(a){return"function"==typeof a};l(/x/)&&(l=function(a){return"function"==typeof a&&"[object Function]"===k.call(a)});var l;f.isFunction=l;var m=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===k.call(a):!1};return f.isArray=m,f.escapeExpression=d,f.isEmpty=e,f}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new h("Missing helper: '"+a+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse||function(){},e=c.fn;return m(b)&&(b=b.call(this)),b===!0?e(this):b===!1||null==b?d(this):l(b)?b.length>0?a.helpers.each(b,c):d(this):e(b)}),a.registerHelper("each",function(a,b){var c,d=b.fn,e=b.inverse,f=0,g="";if(m(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(l(a))for(var h=a.length;h>f;f++)c&&(c.index=f,c.first=0===f,c.last=f===a.length-1),g+=d(a[f],{data:c});else for(var i in a)a.hasOwnProperty(i)&&(c&&(c.key=i,c.index=f,c.first=0===f),g+=d(a[i],{data:c}),f++);return 0===f&&(g=e(this)),g}),a.registerHelper("if",function(a,b){return m(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||g.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){return m(a)&&(a=a.call(this)),g.isEmpty(a)?void 0:b.fn(a)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)})}function e(a,b){p.log(a,b)}var f={},g=a,h=b,i="1.3.0";f.VERSION=i;var j=4;f.COMPILER_REVISION=j;var k={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};f.REVISION_CHANGES=k;var l=g.isArray,m=g.isFunction,n=g.toString,o="[object Object]";f.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:p,log:e,registerHelper:function(a,b,c){if(n.call(a)===o){if(c||b)throw new h("Arg not supported with multiple helpers");g.extend(this.helpers,a)}else c&&(b.not=c),this.helpers[a]=b},registerPartial:function(a,b){n.call(a)===o?g.extend(this.partials,a):this.partials[a]=b}};var p={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(p.level<=a){var c=p.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};f.logger=p,f.log=e;var q=function(a){var b={};return g.extend(b,a),b};return f.createFrame=q,f}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");var c=function(a,c,d,e,f,g){var h=b.VM.invokePartial.apply(this,arguments);if(null!=h)return h;if(b.compile){var i={helpers:e,partials:f,data:g};return f[c]=b.compile(a,{data:void 0!==g},b),f[c](d,i)}throw new l("The partial "+c+" could not be compiled when running in runtime-only mode")},d={escapeExpression:k.escapeExpression,invokePartial:c,programs:[],program:function(a,b,c){var d=this.programs[a];return c?d=g(a,b,c):d||(d=this.programs[a]=g(a,b)),d},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c={},k.extend(c,b),k.extend(c,a)),c},programWithDepth:b.VM.programWithDepth,noop:b.VM.noop,compilerInfo:null};return function(c,e){e=e||{};var f,g,h=e.partial?e:b;e.partial||(f=e.helpers,g=e.partials);var i=a.call(d,h,c,f,g,e.data);return e.partial||b.VM.checkRevision(d.compilerInfo),i}}function f(a,b,c){var d=Array.prototype.slice.call(arguments,3),e=function(a,e){return e=e||{},b.apply(this,[a,e.data||c].concat(d))};return e.program=a,e.depth=d.length,e}function g(a,b,c){var d=function(a,d){return d=d||{},b(a,d.data||c)};return d.program=a,d.depth=0,d}function h(a,b,c,d,e,f){var g={partial:!0,helpers:d,partials:e,data:f};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,g):void 0}function i(){return""}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES;return j.checkRevision=d,j.template=e,j.programWithDepth=f,j.program=g,j.invokePartial=h,j.noop=i,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,f=m}(d,a,c,b,e);return f}();this.DFB=this.DFB||{},this.DFB.menu=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n    <div class="col-xs-12 col-sm-4 col-md-3">\n      <div class="thumbnail">\n        <a href="',(e=c.url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.url,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" title="',(e=c.about)?d=e.call(a,{hash:{},data:b}):(e=a&&a.about,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'">\n          <img src="',(e=c.image)?d=e.call(a,{hash:{},data:b}):(e=a&&a.image,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" class="img-responsive img-rounded">\n        </a>\n        <div class="caption">\n          <p class="center">\n            <a href="',(e=c.url)?d=e.call(a,{hash:{},data:b}):(e=a&&a.url,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" title="',(e=c.about)?d=e.call(a,{hash:{},data:b}):(e=a&&a.about,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+'" class="btn btn-block btn-success">\n              <i class="icon-book"></i>&nbsp;',(e=c.title)?d=e.call(a,{hash:{},data:b}):(e=a&&a.title,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+" (",(e=c.total_books)?d=e.call(a,{hash:{},data:b}):(e=a&&a.total_books,d=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(d)+" books)\n            </a>\n          </p>\n        </div>\n      </div>\n    </div>\n  "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="row-fluid">\n  <p class="center">\n    <strong>',(h=c.total_platforms)?g=h.call(b,{hash:{},data:e}):(h=b&&b.total_platforms,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+"</strong> platforms and <strong>",(h=c.total_free_books)?g=h.call(b,{hash:{},data:e}):(h=b&&b.total_free_books,g=typeof h===j?h.call(b,{hash:{},data:e}):h),i+=k(g)+'</strong> books.\n  </p>\n</div>\n<div class="row-fluid">\n  ',g=c.each.call(b,b&&b.platforms,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(g||0===g)&&(i+=g),i+="\n</div>\n"}),this.DFB.thumb_books=Handlebars.template(function(a,b,c,d,e){function f(a,b,d){var e,f,i="";return i+='\n  <section id="',(f=c.name)?e=f.call(a,{hash:{},data:b}):(f=a&&a.name,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'">\n    <div class="col-xs-12 col-sm-4 col-md-4">\n    ',e=c["if"].call(a,a&&a.featured,{hash:{},inverse:m.program(4,h,b),fn:m.program(2,g,b),data:b}),(e||0===e)&&(i+=e),i+='\n        <a href="',(f=c.url)?e=f.call(a,{hash:{},data:b}):(f=a&&a.url,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'" target="_blank" title="',(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+"\" onclick=\"ga('send', 'event', 'Books', '"+l((e=d&&d.title,typeof e===k?e.apply(a):e))+"', '",(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'\');">\n          <img src="',(f=c.image)?e=f.call(a,{hash:{},data:b}):(f=a&&a.image,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'" class="img-responsive img-rounded" width="250" height="120">\n        </a>\n        <div class="caption">\n          <h3 class="book-title">',(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'</h3>\n          <p class="book-description">',(f=c.description)?e=f.call(a,{hash:{},data:b}):(f=a&&a.description,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'</p>\n          <p class="book-metadata">Author: ',(f=c.author)?e=f.call(a,{hash:{},data:b}):(f=a&&a.author,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'<br>Year: <span class="label label-success">',(f=c.year)?e=f.call(a,{hash:{},data:b}):(f=a&&a.year,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'</span> | Lang.: <span class="label label-success">',(f=c.lang)?e=f.call(a,{hash:{},data:b}):(f=a&&a.lang,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'</span> | Pages: <span class="label label-success">',(f=c.pages)?e=f.call(a,{hash:{},data:b}):(f=a&&a.pages,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'</span>\n          <p><a href="',(f=c.url)?e=f.call(a,{hash:{},data:b}):(f=a&&a.url,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'" target="_blank" class="btn btn-success btn-block" role="button" onclick="ga(\'send\', \'event\', \'Books\', \''+l((e=d&&d.title,typeof e===k?e.apply(a):e))+"', '",(f=c.title)?e=f.call(a,{hash:{},data:b}):(f=a&&a.title,e=typeof f===k?f.call(a,{hash:{},data:b}):f),i+=l(e)+'\');"><i class="icon-play"></i>&nbsp;Read</a>\n        </div>\n      </div>\n    </div>\n  </section>\n'}function g(){return'\n      <div class="thumbnail thumbnail-featured">\n        <span class="label label-primary label-top">FEATURED BOOK</span>\n    '}function h(){return'\n      <div class="thumbnail">\n    '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="",k="function",l=this.escapeExpression,m=this;return i=c.each.call(b,b&&b.books,{hash:{},inverse:m.noop,fn:m.programWithDepth(1,f,e,b),data:e}),(i||0===i)&&(j+=i),j+="\n"}),function(){var a=document.querySelector(".navbar-toggle"),b=document.querySelector(".navbar-collapse"),c=document.querySelector("[data-dfb-url]"),d=document.querySelector("[data-dfb-template]"),e=document.querySelectorAll("[data-dfb-category]");a.addEventListener("click",function(){b.classList.contains("hidden-xs")?b.classList.remove("hidden-xs"):b.classList.add("hidden-xs")});for(var f=0,g=e.length||0;g>f;f++)e[f].addEventListener("click",function(a){var b=JSON.parse(localStorage.getItem("devfreebooks")),c=a.target.getAttribute("data-dfb-category"),e=d.getAttribute("data-dfb-template"),f=a.target.getAttribute("data-dfb"),g=!0;"platform"===f&&c&&(b.platforms=b.platforms.filter(function(a){return a.category==c}),g=b.platforms.length>0),d.innerHTML=g?DFB[e](b):"<div class='result-status'><h3>Nothing was found here :(</h3></div>"});var h=function(a){a&&a.sort(function(){return Math.random()-.5})},i=function(){if(c&&d){var a=c.getAttribute("data-dfb-url"),b=d.getAttribute("data-dfb-template");request=new XMLHttpRequest,request.open("GET",a,!0),request.onload=function(){var a=JSON.parse(request.responseText);a.platforms&&h(a.platforms),d.innerHTML=DFB[b](a),localStorage.setItem("devfreebooks",request.responseText)},request.send()}};i()}();